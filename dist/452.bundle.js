(self.webpackChunkreact_scaffold=self.webpackChunkreact_scaffold||[]).push([[452],{452:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a,o=r(837),s=r(763),i=r(52);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},l=r(696),c=r(166),f=function(){return(0,s.useEffect)(n((function(){console.log(l),console.log(c);var e=document.getElementById("GL_PointColors");if(null!==e){var t=(0,i.ZP)(e,null);if(null!==t){console.log(t);var r=(0,i.Re)(t,l.sourceCode,c.sourceCode);t.useProgram(r);var a=t.getAttribLocation(r,"a_position"),o=t.createBuffer();t.enableVertexAttribArray(a),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([.5,-.5,-.5,-.5,0,0,-.5,.5,.5,.5]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(a,2,t.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0),t.drawArrays(t.POINTS,0,5)}else console.log("gl error")}else console.log("canvas error")}),"useProgram{}")),s.createElement("canvas",{id:"GL_PointColors",width:"500",height:"500"})};n(f,"useEffect{}");var d=(0,o.w)(f);const u=d;var g,m;(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(f,"GLPointColors","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/components/glsl/GLPointColor.tsx"),g.register(d,"default","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/components/glsl/GLPointColor.tsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},52:(e,t,r)=>{"use strict";var a;r.d(t,{ZP:()=>u,Re:()=>i}),e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function s(e,t){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],a=0;a<r.length;++a)try{var o=e.getContext(r[a],t);if(null!==o&&o instanceof WebGLRenderingContext)return o}catch(e){console.log(e);continue}return null}function i(e,t,r){var a=l(e,e.VERTEX_SHADER,t);if("string"==typeof a)return a;var o=l(e,e.FRAGMENT_SHADER,r);return"string"==typeof o?o:n(e,a,o)}function n(e,t,r){var a=e.createProgram();if(null===a)return"创建 program 对象失败！";if(e.attachShader(a,t),e.attachShader(a,r),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS))return a;var o=e.getProgramInfoLog(a);return null===o?"":(e.deleteProgram(a),o)}function l(e,t,r){var a=e.createShader(t);if(null===a)return"创建 shader 对象失败！";if(e.shaderSource(a,r),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))return a;var o=e.getShaderInfoLog(a);return e.deleteShader(a),null===o?"":o}function c(e,t,r){var a=f(t),o=f(r);return Promise.all([a,o])}function f(e){return new Promise((function(t,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&(200===a.status?t(a.responseText):r(a.status))},a.open("GET",e,!0),a.send()}))}var d=s;const u=d;function g(e){return new Promise((function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=function(){r(a)},a.onabort=function(){r(a)},a.src=e}))}var m,b;(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(s,"getWebGLContext","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register((function(e,t){for(var r=["webgl2"],a=0;a<r.length;++a)try{var o=e.getContext(r[a],t);if(null===o||Object.is(o,WebGL2RenderingContext))return o}catch(e){continue}return null}),"getWebGL2Context","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(i,"getWebGLProgram","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(n,"createProgram","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(l,"createShader","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register((function(e,t,r){return new Promise((function(a,s){c(0,t,r).then(o((function(t){var r=t[0],o=t[1],s=i(e,r,o);e.useProgram(s),a(s)}),"useProgram{}")).catch((function(e){s(e)})).finally((function(){console.log("vsFile:".concat(t,"，fsFile:").concat(r,"加载完成"))}))}))}),"getWebGLProgramFromShadersFile","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(c,"loadShaders","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(f,"loadShaderFromFile","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register((function(e){var t=[];return e.forEach((function(e){t.push(g(e))})),Promise.all(t)}),"loadImages","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(g,"loadImage","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts"),m.register(d,"default","/Users/matias/matias_github/scaffold/react-scaffold/src/WebGL/utils/ts/shaderUtils.ts")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},166:e=>{e.exports={sourceCode:"precision mediump float;void main(){float A=distance(gl_PointCoord,vec2(0.5,0.5));if(A<0.5){gl_FragColor=vec4(1.,0.,0.,1.);}else{discard;}}",uniforms:{},consts:{}}},696:e=>{e.exports={sourceCode:"attribute vec4 a_position;void main(){gl_Position=a_position;gl_PointSize=20.;}",uniforms:{},consts:{}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1zY2FmZm9sZC8uL3NyYy9XZWJHTC9jb21wb25lbnRzL2dsc2wvR0xQb2ludENvbG9yLnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1zY2FmZm9sZC8uL3NyYy9XZWJHTC91dGlscy90cy9zaGFkZXJVdGlscy50cyIsIndlYnBhY2s6Ly9yZWFjdC1zY2FmZm9sZC8uL3NyYy9XZWJHTC9zaGFkZXIvZnJhZ21lbnRTaGFkZXIvR0xQb2ludENvbG9ycy5mcmFnIiwid2VicGFjazovL3JlYWN0LXNjYWZmb2xkLy4vc3JjL1dlYkdML3NoYWRlci92ZXJ0ZXhTaGFkZXIvR0xQb2ludENvbG9ycy52ZXJ0Il0sIm5hbWVzIjpbInZzRmlsZSIsImZzRmlsZSIsIkdMUG9pbnRDb2xvcnMiLCJ1c2VFZmZlY3QiLCJjb25zb2xlIiwibG9nIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdsIiwicHJvZ3JhbSIsInNvdXJjZUNvZGUiLCJ1c2VQcm9ncmFtIiwiYV9wb3NpdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwiYnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwiQllURVNfUEVSX0VMRU1FTlQiLCJkcmF3QXJyYXlzIiwiUE9JTlRTIiwiaWQiLCJ3aWR0aCIsImhlaWdodCIsImdldFdlYkdMQ29udGV4dCIsIm9wdGlvbnMiLCJuYW1lcyIsImkiLCJsZW5ndGgiLCJjYW52YXNDb250ZXh0IiwiZ2V0Q29udGV4dCIsIldlYkdMUmVuZGVyaW5nQ29udGV4dCIsImUiLCJnZXRXZWJHTFByb2dyYW0iLCJ2ZXJ0ZXhTb3VyY2UiLCJmcmFnbWVudFNvdXJjZSIsInZlcnRleFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJmcmFnbWVudFNoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImVyciIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsInR5cGUiLCJzb3VyY2UiLCJzaGFkZXIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJnZXRTaGFkZXJJbmZvTG9nIiwiZGVsZXRlU2hhZGVyIiwibG9hZFNoYWRlcnMiLCJ2c0ZpbGVOYW1lIiwiZnNGaWxlTmFtZSIsImxvYWRWU2hhZGVyUHJvbWlzZSIsImxvYWRTaGFkZXJGcm9tRmlsZSIsImxvYWRGU2hhZGVyUHJvbWlzZSIsIlByb21pc2UiLCJhbGwiLCJmaWxlbmFtZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwib3BlbiIsInNlbmQiLCJsb2FkSW1hZ2UiLCJzcmMiLCJpbWFnZSIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJPYmplY3QiLCJpcyIsIldlYkdMMlJlbmRlcmluZ0NvbnRleHQiLCJ0aGVuIiwiZmlsZXMiLCJ2c0NvbnRlbnQiLCJmc0NvbnRlbnQiLCJpbWFnZVVSTHMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInB1c2giLCJtb2R1bGUiLCJleHBvcnRzIiwidW5pZm9ybXMiLCJjb25zdHMiXSwibWFwcGluZ3MiOiI4WEFrQk1BLEVBQVMsRUFBUSxLQUNqQkMsRUFBUyxFQUFRLEtBRWpCQyxFQUFnQixXQXdEbEIsT0F0REEsSUFBQUMsV0FBVSxjQUVOQyxRQUFRQyxJQUFJTCxHQUNaSSxRQUFRQyxJQUFJSixHQUVaLElBQU1L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LFdBQVdGLEdBQ2RnRSxFQUFRaEUsS0FMWix3QkFNUyxTQUFDMkMsR0FDTnNCLEVBQU90QixNQVBYLFNBUVcsV0FDUGpELFFBQVFDLElBQVIsaUJBQXNCNkQsRUFBdEIsbUJBQTJDQyxFQUEzQyxpQixxSUFZSEYsRSxrSEFXQUksRSwwSEFxQ1QsU0FBb0I2QixHQUNoQixJQUFJMUIsRUFBd0MsR0FJNUMsT0FIQTBCLEVBQVVDLFNBQVEsU0FBQUMsR0FDZDVCLEVBQUk2QixLQUFLakIsRUFBVWdCLE9BRWhCN0IsUUFBUUMsSUFBSUEsSyxpSEFRZFksRSwwVEMxT1RrQixFQUFPQyxRQUFVLENBQUM1RixXQUFXLDhJQUE4STZGLFNBQVMsR0FBR0MsT0FBTyxLLFFDQTlMSCxFQUFPQyxRQUFVLENBQUM1RixXQUFXLGtGQUFrRjZGLFNBQVMsR0FBR0MsT0FBTyIsImZpbGUiOiI0NTIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIEBBdXRob3I6IHRhbmdkYW95b25nXG4gKiBARGF0ZTogMjAyMC0xMi0yNSAxNDoyODoxMlxuICogQExhc3RFZGl0b3JzOiB0YW5nZGFveW9uZ1xuICogQExhc3RFZGl0VGltZTogMjAyMS0wNC0yMCAxNjozNzozOFxuICogQERlc2NyaXB0aW9uOiBXZWJHTCBHTFNMIGdsX1BvaW50Q29sb3JcbiAqL1xuLy8gaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgaG90IH0gZnJvbSAncmVhY3QtaG90LWxvYWRlci9yb290JzsvLyDlvJXlhaVob3RcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZ2V0V2ViR0xDb250ZXh0LCB7IGdldFdlYkdMUHJvZ3JhbSB9IGZyb20gJy4uLy4uL3V0aWxzL3RzL3NoYWRlclV0aWxzJztcbi8vIGltcG9ydCB7IHVuaXRNYXRyaXgsIHJvdGF0TWF0cml4LCByb3RhdFhNYXRyaXgsIHJvdGF0WU1hdHJpeCwgcm90YXRaTWF0cml4LCB6b29tTWF0cml4LCB0cmFuc2xhdGlvbk1hdHJpeCB9IGZyb20gJy4uLy4uL3V0aWxzL3RzL3NoYWRlckNvbnN0LnRzJztcbi8vIGltcG9ydCB2c0ZpbGUgZnJvbSAnLi4vLi4vc2hhZGVyL3ZlcnRleFNoYWRlci9HTFBvaW50Q29sb3JzLnZlcnQnO1xuLy8gaW1wb3J0IGZzRmlsZSBmcm9tICcuLi8uLi9zaGFkZXIvZnJhZ21lbnRTaGFkZXIvR0xQb2ludENvbG9ycy5mcmFnJztcbi8vIGltcG9ydCB7IHNoYWRlclVSTCB9IGZyb20gJ2dsc2xTaGFkZXInO1xuXG5pbXBvcnQgeyBHbHNsU2hhZGVyLCBHbHNsVmFyaWFibGUsIEdsc2xWYXJpYWJsZU1hcCB9IGZyb20gJ3dlYnBhY2stZ2xzbC1taW5pZnknO1xuXG5jb25zdCB2c0ZpbGUgPSByZXF1aXJlKCcuLi8uLi9zaGFkZXIvdmVydGV4U2hhZGVyL0dMUG9pbnRDb2xvcnMudmVydCcpIGFzIEdsc2xTaGFkZXI7XG5jb25zdCBmc0ZpbGUgPSByZXF1aXJlKCcuLi8uLi9zaGFkZXIvZnJhZ21lbnRTaGFkZXIvR0xQb2ludENvbG9ycy5mcmFnJykgYXMgR2xzbFNoYWRlcjtcblxuY29uc3QgR0xQb2ludENvbG9ycyA9ICgpID0+IHtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyh2c0ZpbGUpO1xuICAgICAgICBjb25zb2xlLmxvZyhmc0ZpbGUpO1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdHTF9Qb2ludENvbG9ycycpO1xuICAgICAgICBpZiAoY2FudmFzID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiAtIOmUmeivr+aPkOekulxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbnZhcyBlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdsID0gZ2V0V2ViR0xDb250ZXh0KGNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudCwgbnVsbCk7XG4gICAgICAgIGlmIChnbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETzogLSDplJnor6/mj5DnpLpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnbCBlcnJvcicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGdsKTtcbiAgICAgICAgbGV0IHByb2dyYW0gPSBnZXRXZWJHTFByb2dyYW0oZ2wsIHZzRmlsZS5zb3VyY2VDb2RlLCBmc0ZpbGUuc291cmNlQ29kZSk7XG4gICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIFxuICAgICAgICAvLyDojrflj5ZzaGFkZXLkuK1hX3Bvc2l0aW9u55qE5Zyw5Z2AXG4gICAgICAgIGNvbnN0IGFfcG9zaXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnYV9wb3NpdGlvbicpO1xuXG4gICAgICAgIC8vIOWwhumhtueCueeahOS9jee9ruaVsOaNruS/ruaUueS4uu+8mlxuICAgICAgICBsZXQgcG9pbnRQb3MgPSBbXG4gICAgICAgICAgICAwLjUsIC0wLjUsXG4gICAgICAgICAgICAtMC41LCAtMC41LFxuICAgICAgICAgICAgMCwgMCxcbiAgICAgICAgICAgIC0wLjUsIDAuNSxcbiAgICAgICAgICAgIDAuNSwgMC41XG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICBcbiAgICAgICAgLy8g6L+Z5piv5bCGc2hhZGVy5Lit55qEYV9wb3NpdGlvbuS4jmJ1ZmZlcue7keWumui1t+adpVxuICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX3Bvc2l0aW9uKTtcblxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVyKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkocG9pbnRQb3MpLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgICBhX3Bvc2l0aW9uLFxuICAgICAgICAgICAgMixcbiAgICAgICAgICAgIGdsLkZMT0FULFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgKiAyLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuXG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuUE9JTlRTLCAwLCA1KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxjYW52YXMgaWQ9XCJHTF9Qb2ludENvbG9yc1wiIHdpZHRoPVwiNTAwXCIgaGVpZ2h0PVwiNTAwXCI+PC9jYW52YXM+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGhvdChHTFBvaW50Q29sb3JzKTsiLCIvKlxuICogQEF1dGhvcjogdGFuZ2Rhb3lvbmdcbiAqIEBEYXRlOiAyMDIwLTEyLTE1IDEwOjM5OjU0XG4gKiBATGFzdEVkaXRvcnM6IHRhbmdkYW95b25nXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEyLTI1IDE4OjEwOjUxXG4gKiBARGVzY3JpcHRpb246IOedgOiJsuivreiogOW3peWFt1xuICovXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uOiDojrflj5ZXZWJHTCBjb250ZXh0KOWFvOWuueWHoOenjea1j+iniOWZqOeahOiOt+WPluaWueW8jylcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhc1xuICogQHBhcmFtIHthbnl9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1dlYkdMUmVuZGVyaW5nQ29udGV4dCB8IG51bGx9XG4gKi9cbmZ1bmN0aW9uIGdldFdlYkdMQ29udGV4dChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBvcHRpb25zPzogYW55KTogV2ViR0xSZW5kZXJpbmdDb250ZXh0IHwgbnVsbCB7XG4gICAgbGV0IG5hbWVzID0gWyd3ZWJnbCcsICdleHBlcmltZW50YWwtd2ViZ2wnLCAnd2Via2l0LTNkJywgJ21vei13ZWJnbCddO1xuICAgIGxldCBjb250ZXh0Om51bGwgID0gbnVsbDtcbiAgICAvLyDkuI3kvb/nlKhmb3JFYWNo5peg5rOV6YCA5Ye6XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQgIT09IG51bGwgJiYgY2FudmFzQ29udGV4dCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiA8V2ViR0xSZW5kZXJpbmdDb250ZXh0PmNhbnZhc0NvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uOiDojrflj5ZXZWJHTDIgY29udGV4dFxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzXG4gKiBAcGFyYW0ge2FueX0gb3B0aW9uc1xuICogQHJldHVybiB7V2ViR0wyUmVuZGVyaW5nQ29udGV4dCB8IG51bGx9XG4gKi9cbmZ1bmN0aW9uIGdldFdlYkdMMkNvbnRleHQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgb3B0aW9ucz86IGFueSk6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgfCBudWxsIHtcbiAgICBsZXQgbmFtZXMgPSBbJ3dlYmdsMiddO1xuICAgIGxldCBjb250ZXh0ID0gbnVsbDtcbiAgICAvLyDkuI3kvb/nlKhmb3JFYWNo5peg5rOV6YCA5Ye6XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGNhbnZhc0NvbnRleHQgPT09IG51bGwgfHwgT2JqZWN0LmlzKGNhbnZhc0NvbnRleHQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxXZWJHTDJSZW5kZXJpbmdDb250ZXh0IHwgbnVsbD5jYW52YXNDb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb246IOiOt+WPliBXZWJHTFByb2dyYW1cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbFxuICogQHBhcmFtIHtzdHJpbmd9IHZlcnRleFNvdXJjZVxuICogQHBhcmFtIHtzdHJpbmd9IGZyYWdtZW50U291cmNlXG4gKiBAcmV0dXJuIHtXZWJHTFByb2dyYW0gfCBzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldFdlYkdMUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTb3VyY2U6IHN0cmluZywgZnJhZ21lbnRTb3VyY2U6IHN0cmluZyk6IFdlYkdMUHJvZ3JhbSB8IHN0cmluZyB7XG4gICAgLy8g5qC55o2u5rqQ5Luj56CB5Yib5bu66aG254K5552A6Imy5ZmoXG4gICAgbGV0IHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdmVydGV4U291cmNlKTtcbiAgICBpZiAodHlwZW9mIHZlcnRleFNoYWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZlcnRleFNoYWRlcjtcbiAgICB9XG4gICAgLy8g5qC55o2u5rqQ5Luj56CB5Yib5bu654mH5YWD552A6Imy5ZmoXG4gICAgbGV0IGZyYWdtZW50U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50U291cmNlKTtcbiAgICBpZiAodHlwZW9mIGZyYWdtZW50U2hhZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXI7XG4gICAgfVxuICAgIC8vIOWIm+W7uiBXZWJHTFByb2dyYW0g56iL5bqPXG4gICAgbGV0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb246IOWIm+W7uiBwcm9ncmFtIOWvueixoVxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsXG4gKiBAcGFyYW0ge1dlYkdMU2hhZGVyfSB2ZXJ0ZXhTaGFkZXJcbiAqIEBwYXJhbSB7V2ViR0xTaGFkZXJ9IGZyYWdtZW50U2hhZGVyXG4gKiBAcmV0dXJuIHtXZWJHTFByb2dyYW0gfCBzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyKTogV2ViR0xQcm9ncmFtIHwgc3RyaW5nIHtcbiAgICAvLyDliJvlu7ogcHJvZ3JhbSDlr7nosaFcbiAgICBsZXQgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICBpZiAocHJvZ3JhbSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJ+WIm+W7uiBwcm9ncmFtIOWvueixoeWksei0pe+8gSc7XG4gICAgfVxuICAgIC8vIOW+gCBwcm9ncmFtIOWvueixoeS4reS8oOWFpSBXZWJHTFNoYWRlciDlr7nosaFcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xuICAgIC8vIOmTvuaOpSBwcm9ncmFtXG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgLy8g5Yik5patIHByb2dyYW0g5piv5ZCm6ZO+5o6l5oiQ5YqfXG4gICAgbGV0IHN1Y2Nlc3MgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9XG4gICAgLy8g5aaC5p6cIHByb2dyYW0g6ZO+5o6l5aSx6LSl77yM5YiZ6L+U5Zue6ZSZ6K+v5L+h5oGvXG4gICAgbGV0IGVyciA9IGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xuICAgIGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICAvLyDliKDpmaQgcHJvZ3JhbSDlr7nosaFcbiAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBlcnI7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uOiDliJvlu7ogc2hhZGVyIOWvueixoVxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsXG4gKiBAcGFyYW0ge251bWJlcn0gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVxuICogQHJldHVybiB7V2ViR0xTaGFkZXIgfCBzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0eXBlOiBudW1iZXIsIHNvdXJjZTogc3RyaW5nKTogV2ViR0xTaGFkZXIgfCBzdHJpbmcge1xuICAgIC8vIOWIm+W7uiBzaGFkZXIg5a+56LGhXG4gICAgbGV0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBpZiAoc2hhZGVyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAn5Yib5bu6IHNoYWRlciDlr7nosaHlpLHotKXvvIEnO1xuICAgIH1cbiAgICAvLyDlvoAgc2hhZGVyIOS4reS8oOWFpea6kOS7o+eggVxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XG4gICAgLy8g57yW6K+RIHNoYWRlclxuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICAvLyDliKTmlq0gc2hhZGVyIOaYr+WQpue8luivkeaIkOWKn1xuICAgIGxldCBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfVxuICAgIC8vIOWmguaenOe8luivkeWksei0pe+8jOWImei/lOWbnumUmeivr+S/oeaBr1xuICAgIGxldCBlcnIgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XG4gICAgLy8g5Yig6ZmkIHNoYWRlciDlr7nosaFcbiAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZiAoZXJyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIGVycjtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb246IOmAmui/h3NoYWRlcuaWh+S7tuWIm+W7unByb2dyYW1cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbFxuICogQHBhcmFtIHtzdHJpbmd9IHZzRmlsZU5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBmc0ZpbGVOYW1lXG4gKiBAcmV0dXJuIHtQcm9taXNlPFdlYkdMUHJvZ3JhbT59XG4gKi9cbmZ1bmN0aW9uIGdldFdlYkdMUHJvZ3JhbUZyb21TaGFkZXJzRmlsZShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2c0ZpbGVOYW1lOiBzdHJpbmcsIGZzRmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8V2ViR0xQcm9ncmFtPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbG9hZFNoYWRlcnMoZ2wsIHZzRmlsZU5hbWUsIGZzRmlsZU5hbWUpLnRoZW4oKGZpbGVzKSA9PiB7XG4gICAgICAgICAgICBsZXQgdnNDb250ZW50ID0gZmlsZXNbMF07XG4gICAgICAgICAgICBsZXQgZnNDb250ZW50ID0gZmlsZXNbMV07XG4gICAgICAgICAgICBsZXQgcHJvZ3JhbSA9IGdldFdlYkdMUHJvZ3JhbShnbCwgdnNDb250ZW50LCBmc0NvbnRlbnQpO1xuICAgICAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgICAgIHJlc29sdmUocHJvZ3JhbSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGB2c0ZpbGU6JHt2c0ZpbGVOYW1lfe+8jGZzRmlsZToke2ZzRmlsZU5hbWV95Yqg6L295a6M5oiQYCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbjog5Yqg6L29IHNoYWRlcnMg5paH5Lu2XG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2xcbiAqIEBwYXJhbSB7c3RyaW5nfSB2c0ZpbGVOYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gZnNGaWxlTmFtZVxuICogQHJldHVybiB7UHJvbWlzZTxbc3RyaW5nLCBzdHJpbmddPn1cbiAqL1xuZnVuY3Rpb24gbG9hZFNoYWRlcnMoZ2w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdnNGaWxlTmFtZTogc3RyaW5nLCBmc0ZpbGVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPFtzdHJpbmcsIHN0cmluZ10+IHtcbiAgICBsZXQgbG9hZFZTaGFkZXJQcm9taXNlID0gbG9hZFNoYWRlckZyb21GaWxlKHZzRmlsZU5hbWUpO1xuICAgIGxldCBsb2FkRlNoYWRlclByb21pc2UgPSBsb2FkU2hhZGVyRnJvbUZpbGUoZnNGaWxlTmFtZSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtsb2FkVlNoYWRlclByb21pc2UsIGxvYWRGU2hhZGVyUHJvbWlzZV0pO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbjog5Yqg6L29U2hhZGVy5paH5Lu2XG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWVcbiAqIEByZXR1cm4ge1Byb21pc2U8c3RyaW5nPn1cbiAqL1xuZnVuY3Rpb24gbG9hZFNoYWRlckZyb21GaWxlKGZpbGVuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3Quc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgZmlsZW5hbWUsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnNlbmQoKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0V2ViR0xDb250ZXh0O1xuXG5leHBvcnQge1xuICAgIGdldFdlYkdMQ29udGV4dCxcbiAgICBnZXRXZWJHTDJDb250ZXh0LFxuICAgIGdldFdlYkdMUHJvZ3JhbSxcbiAgICBjcmVhdGVQcm9ncmFtLFxuICAgIGNyZWF0ZVNoYWRlcixcbiAgICBnZXRXZWJHTFByb2dyYW1Gcm9tU2hhZGVyc0ZpbGUsXG4gICAgbG9hZFNoYWRlcnMsXG4gICAgbG9hZFNoYWRlckZyb21GaWxlLFxuICAgIGxvYWRJbWFnZXMsXG4gICAgbG9hZEltYWdlXG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbjog5Yqg6L295aSa5byg5Zu+54mHXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1hZ2VVUkxzXG4gKiBAcmV0dXJuIHtQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnRbXT59XG4gKi9cbmZ1bmN0aW9uIGxvYWRJbWFnZXMoaW1hZ2VVUkxzOiBzdHJpbmdbXSk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudFtdPiB7XG4gICAgbGV0IGFsbDogQXJyYXk8UHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50Pj4gPSBbXTtcbiAgICBpbWFnZVVSTHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgYWxsLnB1c2gobG9hZEltYWdlKGVsZW1lbnQpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWxsKTtcbn1cbiBcbi8qKlxuICogQGRlc2NyaXB0aW9uOiDliqDovb3lm77niYdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAqIEByZXR1cm4ge1Byb21pc2U8SFRNTEltYWdlRWxlbWVudD59XG4gKi9cbmZ1bmN0aW9uIGxvYWRJbWFnZShzcmM6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoaW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWplY3QoaW1hZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgfSk7XG59IiwibW9kdWxlLmV4cG9ydHMgPSB7c291cmNlQ29kZTpcInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O3ZvaWQgbWFpbigpe2Zsb2F0IEE9ZGlzdGFuY2UoZ2xfUG9pbnRDb29yZCx2ZWMyKDAuNSwwLjUpKTtpZihBPDAuNSl7Z2xfRnJhZ0NvbG9yPXZlYzQoMS4sMC4sMC4sMS4pO31lbHNle2Rpc2NhcmQ7fX1cIix1bmlmb3Jtczp7fSxjb25zdHM6e319IiwibW9kdWxlLmV4cG9ydHMgPSB7c291cmNlQ29kZTpcImF0dHJpYnV0ZSB2ZWM0IGFfcG9zaXRpb247dm9pZCBtYWluKCl7Z2xfUG9zaXRpb249YV9wb3NpdGlvbjtnbF9Qb2ludFNpemU9MjAuO31cIix1bmlmb3Jtczp7fSxjb25zdHM6e319Il0sInNvdXJjZVJvb3QiOiIifQ==